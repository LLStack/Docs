{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{231:function(e,t,a){\"use strict\";a.r(t);var r=a(2),o=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"supported-tags-and-respective-dockerfile-links\"}},[e._v(\"Supported tags and respective \"),a(\"code\",[e._v(\"Dockerfile\")]),e._v(\" links\")]),e._v(\" \"),a(\"ul\",[a(\"li\",[a(\"a\",{attrs:{href:\"https://github.com/docker-library/mariadb/blob/c895fa579e99a69667e14b50c4b9bdb85d4854fe/10.4/Dockerfile\",target:\"_blank\",rel:\"noopener noreferrer\"}},[a(\"code\",[e._v(\"10.4.12-bionic\")]),e._v(\", \"),a(\"code\",[e._v(\"10.4-bionic\")]),e._v(\", \"),a(\"code\",[e._v(\"10-bionic\")]),e._v(\", \"),a(\"code\",[e._v(\"bionic\")]),e._v(\", \"),a(\"code\",[e._v(\"10.4.12\")]),e._v(\", \"),a(\"code\",[e._v(\"10.4\")]),e._v(\", \"),a(\"code\",[e._v(\"10\")]),e._v(\", \"),a(\"code\",[e._v(\"latest\")]),a(\"OutboundLink\")],1)]),e._v(\" \"),a(\"li\",[a(\"a\",{attrs:{href:\"https://github.com/docker-library/mariadb/blob/60f6c4349a91904fd94c4dc5bf534bd318000c35/10.3/Dockerfile\",target:\"_blank\",rel:\"noopener noreferrer\"}},[a(\"code\",[e._v(\"10.3.22-bionic\")]),e._v(\", \"),a(\"code\",[e._v(\"10.3-bionic\")]),e._v(\", \"),a(\"code\",[e._v(\"10.3.22\")]),e._v(\", \"),a(\"code\",[e._v(\"10.3\")]),a(\"OutboundLink\")],1)]),e._v(\" \"),a(\"li\",[a(\"a\",{attrs:{href:\"https://github.com/docker-library/mariadb/blob/595e0db2db12e2505a35362d9a8138448ebc9ec1/10.2/Dockerfile\",target:\"_blank\",rel:\"noopener noreferrer\"}},[a(\"code\",[e._v(\"10.2.31-bionic\")]),e._v(\", \"),a(\"code\",[e._v(\"10.2-bionic\")]),e._v(\", \"),a(\"code\",[e._v(\"10.2.31\")]),e._v(\", \"),a(\"code\",[e._v(\"10.2\")]),a(\"OutboundLink\")],1)]),e._v(\" \"),a(\"li\",[a(\"a\",{attrs:{href:\"https://github.com/docker-library/mariadb/blob/4c69dec03b0b771563c8474ab358b7812edbfc88/10.1/Dockerfile\",target:\"_blank\",rel:\"noopener noreferrer\"}},[a(\"code\",[e._v(\"10.1.44-bionic\")]),e._v(\", \"),a(\"code\",[e._v(\"10.1-bionic\")]),e._v(\", \"),a(\"code\",[e._v(\"10.1.44\")]),e._v(\", \"),a(\"code\",[e._v(\"10.1\")]),a(\"OutboundLink\")],1)])]),e._v(\" \"),a(\"h1\",{attrs:{id:\"quick-reference\"}},[e._v(\"Quick reference\")]),e._v(\" \"),a(\"ul\",[a(\"li\",[a(\"strong\",[e._v(\"Where to get help\")]),e._v(\": \"),a(\"a\",{attrs:{href:\"https://forums.docker.com/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"the Docker Community Forums\"),a(\"OutboundLink\")],1),e._v(\", \"),a(\"a\",{attrs:{href:\"http://dockr.ly/slack\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"the Docker Community Slack\"),a(\"OutboundLink\")],1),e._v(\", or \"),a(\"a\",{attrs:{href:\"https://stackoverflow.com/search?tab=newest&q=docker\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Stack Overflow\"),a(\"OutboundLink\")],1)]),e._v(\" \"),a(\"li\",[a(\"strong\",[e._v(\"Where to file issues\")]),e._v(\": https://github.com/docker-library/mariadb/issues\")]),e._v(\" \"),a(\"li\",[a(\"strong\",[e._v(\"Maintained by\")]),e._v(\": \"),a(\"a\",{attrs:{href:\"https://github.com/docker-library/mariadb\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"the Docker Community\"),a(\"OutboundLink\")],1)]),e._v(\" \"),a(\"li\",[a(\"strong\",[e._v(\"Supported architectures\")]),e._v(\": (\"),a(\"a\",{attrs:{href:\"https://github.com/docker-library/official-images#architectures-other-than-amd64\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"more info\"),a(\"OutboundLink\")],1),e._v(\") \"),a(\"a\",{attrs:{href:\"https://hub.docker.com/r/amd64/mariadb/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[a(\"code\",[e._v(\"amd64\")]),a(\"OutboundLink\")],1),e._v(\", \"),a(\"a\",{attrs:{href:\"https://hub.docker.com/r/arm64v8/mariadb/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[a(\"code\",[e._v(\"arm64v8\")]),a(\"OutboundLink\")],1),e._v(\", \"),a(\"a\",{attrs:{href:\"https://hub.docker.com/r/ppc64le/mariadb/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[a(\"code\",[e._v(\"ppc64le\")]),a(\"OutboundLink\")],1)]),e._v(\" \"),a(\"li\",[a(\"strong\",[e._v(\"Published image artifact details\")]),e._v(\": \"),a(\"a\",{attrs:{href:\"https://github.com/docker-library/repo-info/blob/master/repos/mariadb\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"repo-info repo's \"),a(\"code\",[e._v(\"repos/mariadb/\")]),e._v(\" directory\"),a(\"OutboundLink\")],1),e._v(\" (\"),a(\"a\",{attrs:{href:\"https://github.com/docker-library/repo-info/commits/master/repos/mariadb\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"history\"),a(\"OutboundLink\")],1),e._v(\") (image metadata, transfer size, etc)\")]),e._v(\" \"),a(\"li\",[a(\"strong\",[e._v(\"Image updates\")]),e._v(\": \"),a(\"a\",{attrs:{href:\"https://github.com/docker-library/official-images/pulls?q=label%3Alibrary%2Fmariadb\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"official-images PRs with label \"),a(\"code\",[e._v(\"library/mariadb\")]),a(\"OutboundLink\")],1),e._v(\" \"),a(\"a\",{attrs:{href:\"https://github.com/docker-library/official-images/blob/master/library/mariadb\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"official-images repo's \"),a(\"code\",[e._v(\"library/mariadb\")]),e._v(\" file\"),a(\"OutboundLink\")],1),e._v(\" (\"),a(\"a\",{attrs:{href:\"https://github.com/docker-library/official-images/commits/master/library/mariadb\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"history\"),a(\"OutboundLink\")],1),e._v(\")\")]),e._v(\" \"),a(\"li\",[a(\"strong\",[e._v(\"Source of this description\")]),e._v(\": \"),a(\"a\",{attrs:{href:\"https://github.com/docker-library/docs/tree/master/mariadb\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"docs repo's \"),a(\"code\",[e._v(\"mariadb/\")]),e._v(\" directory\"),a(\"OutboundLink\")],1),e._v(\" (\"),a(\"a\",{attrs:{href:\"https://github.com/docker-library/docs/commits/master/mariadb\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"history\"),a(\"OutboundLink\")],1),e._v(\")\")])]),e._v(\" \"),a(\"h1\",{attrs:{id:\"what-is-mariadb\"}},[e._v(\"What is MariaDB?\")]),e._v(\" \"),a(\"p\",[e._v(\"MariaDB is a community-developed fork of the MySQL relational database management system intended to remain free under the GNU GPL. Being a fork of a leading open source software system, it is notable for being led by the original developers of MySQL, who forked it due to concerns over its acquisition by Oracle. Contributors are required to share their copyright with the MariaDB Foundation.\")]),e._v(\" \"),a(\"p\",[e._v('The intent is also to maintain high compatibility with MySQL, ensuring a \"drop-in\" replacement capability with library binary equivalency and exact matching with MySQL APIs and commands. It includes the XtraDB storage engine for replacing InnoDB, as well as a new storage engine, Aria, that intends to be both a transactional and non-transactional engine perhaps even included in future versions of MySQL.')]),e._v(\" \"),a(\"blockquote\",[a(\"p\",[a(\"a\",{attrs:{href:\"https://en.wikipedia.org/wiki/MariaDB\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"wikipedia.org/wiki/MariaDB\"),a(\"OutboundLink\")],1)])]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://raw.githubusercontent.com/docker-library/docs/74e3b3d4d60389208732dbd2c95145868111d959/mariadb/logo.png\",alt:\"logo\"}})]),e._v(\" \"),a(\"h1\",{attrs:{id:\"how-to-use-this-image\"}},[e._v(\"How to use this image\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"start-a-mariadb-server-instance\"}},[e._v(\"Start a \"),a(\"code\",[e._v(\"mariadb\")]),e._v(\" server instance\")]),e._v(\" \"),a(\"p\",[e._v(\"Starting a MariaDB instance is simple:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"$ docker run --name some-mariadb -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mariadb:tag\\n\")])])]),a(\"p\",[e._v(\"... where \"),a(\"code\",[e._v(\"some-mariadb\")]),e._v(\" is the name you want to assign to your container, \"),a(\"code\",[e._v(\"my-secret-pw\")]),e._v(\" is the password to be set for the MySQL root user and \"),a(\"code\",[e._v(\"tag\")]),e._v(\" is the tag specifying the MySQL version you want. See the list above for relevant tags.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"connect-to-mariadb-from-the-mysql-command-line-client\"}},[e._v(\"Connect to MariaDB from the MySQL command line client\")]),e._v(\" \"),a(\"p\",[e._v(\"The following command starts another \"),a(\"code\",[e._v(\"mariadb\")]),e._v(\" container instance and runs the \"),a(\"code\",[e._v(\"mysql\")]),e._v(\" command line client against your original \"),a(\"code\",[e._v(\"mariadb\")]),e._v(\" container, allowing you to execute SQL statements against your database instance:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"$ docker run -it --network some-network --rm mariadb mysql -hsome-mariadb -uexample-user -p\\n\")])])]),a(\"p\",[e._v(\"... where \"),a(\"code\",[e._v(\"some-mariadb\")]),e._v(\" is the name of your original \"),a(\"code\",[e._v(\"mariadb\")]),e._v(\" container (connected to the \"),a(\"code\",[e._v(\"some-network\")]),e._v(\" Docker network).\")]),e._v(\" \"),a(\"p\",[e._v(\"This image can also be used as a client for non-Docker or remote instances:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"$ docker run -it --rm mariadb mysql -hsome.mysql.host -usome-mysql-user -p\\n\")])])]),a(\"p\",[e._v(\"More information about the MySQL command line client can be found in the \"),a(\"a\",{attrs:{href:\"http://dev.mysql.com/doc/en/mysql.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"MySQL documentation\"),a(\"OutboundLink\")],1)]),e._v(\" \"),a(\"h2\",{attrs:{id:\"via-docker-stack-deploy-or-docker-compose\"}},[e._v(\"... via \"),a(\"a\",{attrs:{href:\"https://docs.docker.com/engine/reference/commandline/stack_deploy/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[a(\"code\",[e._v(\"docker stack deploy\")]),a(\"OutboundLink\")],1),e._v(\" or \"),a(\"a\",{attrs:{href:\"https://github.com/docker/compose\",target:\"_blank\",rel:\"noopener noreferrer\"}},[a(\"code\",[e._v(\"docker-compose\")]),a(\"OutboundLink\")],1)]),e._v(\" \"),a(\"p\",[e._v(\"Example \"),a(\"code\",[e._v(\"stack.yml\")]),e._v(\" for \"),a(\"code\",[e._v(\"mariadb\")]),e._v(\":\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"# Use root/example as user/password credentials\\nversion: '3.1'\\n\\nservices:\\n\\n  db:\\n    image: mariadb\\n    restart: always\\n    environment:\\n      MYSQL_ROOT_PASSWORD: example\\n\\n  adminer:\\n    image: adminer\\n    restart: always\\n    ports:\\n      - 8080:8080\\n\")])])]),a(\"p\",[a(\"a\",{attrs:{href:\"http://play-with-docker.com/?stack=https://raw.githubusercontent.com/docker-library/docs/9efeec18b6b2ed232cf0fbd3914b6211e16e242c/mariadb/stack.yml\",target:\"_blank\",rel:\"noopener noreferrer\"}},[a(\"img\",{attrs:{src:\"https://github.com/play-with-docker/stacks/raw/cff22438cb4195ace27f9b15784bbb497047afa7/assets/images/button.png\",alt:\"Try in PWD\"}}),a(\"OutboundLink\")],1)]),e._v(\" \"),a(\"p\",[e._v(\"Run \"),a(\"code\",[e._v(\"docker stack deploy -c stack.yml mariadb\")]),e._v(\" (or \"),a(\"code\",[e._v(\"docker-compose -f stack.yml up\")]),e._v(\"), wait for it to initialize completely, and visit \"),a(\"code\",[e._v(\"http://swarm-ip:8080\")]),e._v(\", \"),a(\"code\",[e._v(\"http://localhost:8080\")]),e._v(\", or \"),a(\"code\",[e._v(\"http://host-ip:8080\")]),e._v(\" (as appropriate).\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"container-shell-access-and-viewing-mysql-logs\"}},[e._v(\"Container shell access and viewing MySQL logs\")]),e._v(\" \"),a(\"p\",[e._v(\"The \"),a(\"code\",[e._v(\"docker exec\")]),e._v(\" command allows you to run commands inside a Docker container. The following command line will give you a bash shell inside your \"),a(\"code\",[e._v(\"mariadb\")]),e._v(\" container:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"$ docker exec -it some-mariadb bash\\n\")])])]),a(\"p\",[e._v(\"The log is available through Docker's container log:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"$ docker logs some-mariadb\\n\")])])]),a(\"h2\",{attrs:{id:\"using-a-custom-mysql-configuration-file\"}},[e._v(\"Using a custom MySQL configuration file\")]),e._v(\" \"),a(\"p\",[e._v(\"The startup configuration is specified in the file \"),a(\"code\",[e._v(\"/etc/mysql/my.cnf\")]),e._v(\", and that file in turn includes any files found in the \"),a(\"code\",[e._v(\"/etc/mysql/conf.d\")]),e._v(\" directory that end with \"),a(\"code\",[e._v(\".cnf\")]),e._v(\". Settings in files in this directory will augment and/or override settings in \"),a(\"code\",[e._v(\"/etc/mysql/my.cnf\")]),e._v(\". If you want to use a customized MySQL configuration, you can create your alternative configuration file in a directory on the host machine and then mount that directory location as \"),a(\"code\",[e._v(\"/etc/mysql/conf.d\")]),e._v(\" inside the \"),a(\"code\",[e._v(\"mariadb\")]),e._v(\" container.\")]),e._v(\" \"),a(\"p\",[e._v(\"If \"),a(\"code\",[e._v(\"/my/custom/config-file.cnf\")]),e._v(\" is the path and name of your custom configuration file, you can start your \"),a(\"code\",[e._v(\"mariadb\")]),e._v(\" container like this (note that only the directory path of the custom config file is used in this command):\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"$ docker run --name some-mariadb -v /my/custom:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mariadb:tag\\n\")])])]),a(\"p\",[e._v(\"This will start a new container \"),a(\"code\",[e._v(\"some-mariadb\")]),e._v(\" where the MariaDB instance uses the combined startup settings from \"),a(\"code\",[e._v(\"/etc/mysql/my.cnf\")]),e._v(\" and \"),a(\"code\",[e._v(\"/etc/mysql/conf.d/config-file.cnf\")]),e._v(\", with settings from the latter taking precedence.\")]),e._v(\" \"),a(\"h3\",{attrs:{id:\"configuration-without-a-cnf-file\"}},[e._v(\"Configuration without a \"),a(\"code\",[e._v(\"cnf\")]),e._v(\" file\")]),e._v(\" \"),a(\"p\",[e._v(\"Many configuration options can be passed as flags to \"),a(\"code\",[e._v(\"mysqld\")]),e._v(\". This will give you the flexibility to customize the container without needing a \"),a(\"code\",[e._v(\"cnf\")]),e._v(\" file. For example, if you want to change the default encoding and collation for all tables to use UTF-8 (\"),a(\"code\",[e._v(\"utf8mb4\")]),e._v(\") just run the following:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"$ docker run --name some-mariadb -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mariadb:tag --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci\\n\")])])]),a(\"p\",[e._v(\"If you would like to see a complete list of available options, just run:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"$ docker run -it --rm mariadb:tag --verbose --help\\n\")])])]),a(\"h2\",{attrs:{id:\"environment-variables\"}},[e._v(\"Environment Variables\")]),e._v(\" \"),a(\"p\",[e._v(\"When you start the \"),a(\"code\",[e._v(\"mariadb\")]),e._v(\" image, you can adjust the configuration of the MariaDB instance by passing one or more environment variables on the \"),a(\"code\",[e._v(\"docker run\")]),e._v(\" command line. Do note that none of the variables below will have any effect if you start the container with a data directory that already contains a database: any pre-existing database will always be left untouched on container startup.\")]),e._v(\" \"),a(\"h3\",{attrs:{id:\"mysql-root-password\"}},[a(\"code\",[e._v(\"MYSQL_ROOT_PASSWORD\")])]),e._v(\" \"),a(\"p\",[e._v(\"This variable is mandatory and specifies the password that will be set for the MariaDB \"),a(\"code\",[e._v(\"root\")]),e._v(\" superuser account. In the above example, it was set to \"),a(\"code\",[e._v(\"my-secret-pw\")]),e._v(\".\")]),e._v(\" \"),a(\"h3\",{attrs:{id:\"mysql-database\"}},[a(\"code\",[e._v(\"MYSQL_DATABASE\")])]),e._v(\" \"),a(\"p\",[e._v(\"This variable is optional and allows you to specify the name of a database to be created on image startup. If a user/password was supplied (see below) then that user will be granted superuser access (\"),a(\"a\",{attrs:{href:\"http://dev.mysql.com/doc/en/adding-users.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"corresponding to \"),a(\"code\",[e._v(\"GRANT ALL\")]),a(\"OutboundLink\")],1),e._v(\") to this database.\")]),e._v(\" \"),a(\"h3\",{attrs:{id:\"mysql-user-mysql-password\"}},[a(\"code\",[e._v(\"MYSQL_USER\")]),e._v(\", \"),a(\"code\",[e._v(\"MYSQL_PASSWORD\")])]),e._v(\" \"),a(\"p\",[e._v(\"These variables are optional, used in conjunction to create a new user and to set that user's password. This user will be granted superuser permissions (see above) for the database specified by the \"),a(\"code\",[e._v(\"MYSQL_DATABASE\")]),e._v(\" variable. Both variables are required for a user to be created.\")]),e._v(\" \"),a(\"p\",[e._v(\"Do note that there is no need to use this mechanism to create the root superuser, that user gets created by default with the password specified by the \"),a(\"code\",[e._v(\"MYSQL_ROOT_PASSWORD\")]),e._v(\" variable.\")]),e._v(\" \"),a(\"h3\",{attrs:{id:\"mysql-allow-empty-password\"}},[a(\"code\",[e._v(\"MYSQL_ALLOW_EMPTY_PASSWORD\")])]),e._v(\" \"),a(\"p\",[e._v(\"This is an optional variable. Set to \"),a(\"code\",[e._v(\"yes\")]),e._v(\" to allow the container to be started with a blank password for the root user. \"),a(\"em\",[e._v(\"NOTE\")]),e._v(\": Setting this variable to \"),a(\"code\",[e._v(\"yes\")]),e._v(\" is not recommended unless you really know what you are doing, since this will leave your MariaDB instance completely unprotected, allowing anyone to gain complete superuser access.\")]),e._v(\" \"),a(\"h3\",{attrs:{id:\"mysql-random-root-password\"}},[a(\"code\",[e._v(\"MYSQL_RANDOM_ROOT_PASSWORD\")])]),e._v(\" \"),a(\"p\",[e._v(\"This is an optional variable. Set to \"),a(\"code\",[e._v(\"yes\")]),e._v(\" to generate a random initial password for the root user (using \"),a(\"code\",[e._v(\"pwgen\")]),e._v(\"). The generated root password will be printed to stdout (\"),a(\"code\",[e._v(\"GENERATED ROOT PASSWORD: .....\")]),e._v(\").\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"docker-secrets\"}},[e._v(\"Docker Secrets\")]),e._v(\" \"),a(\"p\",[e._v(\"As an alternative to passing sensitive information via environment variables, \"),a(\"code\",[e._v(\"_FILE\")]),e._v(\" may be appended to the previously listed environment variables, causing the initialization script to load the values for those variables from files present in the container. In particular, this can be used to load passwords from Docker secrets stored in \"),a(\"code\",[e._v(\"/run/secrets/\")]),e._v(\" files. For example:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"$ docker run --name some-mysql -e MYSQL_ROOT_PASSWORD_FILE=/run/secrets/mysql-root -d mariadb:tag\\n\")])])]),a(\"p\",[e._v(\"Currently, this is only supported for \"),a(\"code\",[e._v(\"MYSQL_ROOT_PASSWORD\")]),e._v(\", \"),a(\"code\",[e._v(\"MYSQL_ROOT_HOST\")]),e._v(\", \"),a(\"code\",[e._v(\"MYSQL_DATABASE\")]),e._v(\", \"),a(\"code\",[e._v(\"MYSQL_USER\")]),e._v(\", and \"),a(\"code\",[e._v(\"MYSQL_PASSWORD\")]),e._v(\".\")]),e._v(\" \"),a(\"h1\",{attrs:{id:\"initializing-a-fresh-instance\"}},[e._v(\"Initializing a fresh instance\")]),e._v(\" \"),a(\"p\",[e._v(\"When a container is started for the first time, a new database with the specified name will be created and initialized with the provided configuration variables. Furthermore, it will execute files with extensions \"),a(\"code\",[e._v(\".sh\")]),e._v(\", \"),a(\"code\",[e._v(\".sql\")]),e._v(\" and \"),a(\"code\",[e._v(\".sql.gz\")]),e._v(\" that are found in \"),a(\"code\",[e._v(\"/docker-entrypoint-initdb.d\")]),e._v(\". Files will be executed in alphabetical order. You can easily populate your \"),a(\"code\",[e._v(\"mariadb\")]),e._v(\" services by \"),a(\"a\",{attrs:{href:\"https://docs.docker.com/engine/tutorials/dockervolumes/#mount-a-host-file-as-a-data-volume\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"mounting a SQL dump into that directory\"),a(\"OutboundLink\")],1),e._v(\" and provide \"),a(\"a\",{attrs:{href:\"https://docs.docker.com/reference/builder/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"custom images\"),a(\"OutboundLink\")],1),e._v(\" with contributed data. SQL files will be imported by default to the database specified by the \"),a(\"code\",[e._v(\"MYSQL_DATABASE\")]),e._v(\" variable.\")]),e._v(\" \"),a(\"h1\",{attrs:{id:\"caveats\"}},[e._v(\"Caveats\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"where-to-store-data\"}},[e._v(\"Where to Store Data\")]),e._v(\" \"),a(\"p\",[e._v(\"Important note: There are several ways to store data used by applications that run in Docker containers. We encourage users of the \"),a(\"code\",[e._v(\"mariadb\")]),e._v(\" images to familiarize themselves with the options available, including:\")]),e._v(\" \"),a(\"ul\",[a(\"li\",[e._v(\"Let Docker manage the storage of your database data \"),a(\"a\",{attrs:{href:\"https://docs.docker.com/engine/tutorials/dockervolumes/#adding-a-data-volume\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"by writing the database files to disk on the host system using its own internal volume management\"),a(\"OutboundLink\")],1),e._v(\". This is the default and is easy and fairly transparent to the user. The downside is that the files may be hard to locate for tools and applications that run directly on the host system, i.e. outside containers.\")]),e._v(\" \"),a(\"li\",[e._v(\"Create a data directory on the host system (outside the container) and \"),a(\"a\",{attrs:{href:\"https://docs.docker.com/engine/tutorials/dockervolumes/#mount-a-host-directory-as-a-data-volume\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"mount this to a directory visible from inside the container\"),a(\"OutboundLink\")],1),e._v(\". This places the database files in a known location on the host system, and makes it easy for tools and applications on the host system to access the files. The downside is that the user needs to make sure that the directory exists, and that e.g. directory permissions and other security mechanisms on the host system are set up correctly.\")])]),e._v(\" \"),a(\"p\",[e._v(\"The Docker documentation is a good starting point for understanding the different storage options and variations, and there are multiple blogs and forum postings that discuss and give advice in this area. We will simply show the basic procedure here for the latter option above:\")]),e._v(\" \"),a(\"ol\",[a(\"li\",[a(\"p\",[e._v(\"Create a data directory on a suitable volume on your host system, e.g. \"),a(\"code\",[e._v(\"/my/own/datadir\")]),e._v(\".\")])]),e._v(\" \"),a(\"li\",[a(\"p\",[e._v(\"Start your \"),a(\"code\",[e._v(\"mariadb\")]),e._v(\" container like this:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"$ docker run --name some-mariadb -v /my/own/datadir:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mariadb:tag\\n\")])])])])]),e._v(\" \"),a(\"p\",[e._v(\"The \"),a(\"code\",[e._v(\"-v /my/own/datadir:/var/lib/mysql\")]),e._v(\" part of the command mounts the \"),a(\"code\",[e._v(\"/my/own/datadir\")]),e._v(\" directory from the underlying host system as \"),a(\"code\",[e._v(\"/var/lib/mysql\")]),e._v(\" inside the container, where MySQL by default will write its data files.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"no-connections-until-mysql-init-completes\"}},[e._v(\"No connections until MySQL init completes\")]),e._v(\" \"),a(\"p\",[e._v(\"If there is no database initialized when the container starts, then a default database will be created. While this is the expected behavior, this means that it will not accept incoming connections until such initialization completes. This may cause issues when using automation tools, such as \"),a(\"code\",[e._v(\"docker-compose\")]),e._v(\", which start several containers simultaneously.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"usage-against-an-existing-database\"}},[e._v(\"Usage against an existing database\")]),e._v(\" \"),a(\"p\",[e._v(\"If you start your \"),a(\"code\",[e._v(\"mariadb\")]),e._v(\" container instance with a data directory that already contains a database (specifically, a \"),a(\"code\",[e._v(\"mysql\")]),e._v(\" subdirectory), the \"),a(\"code\",[e._v(\"$MYSQL_ROOT_PASSWORD\")]),e._v(\" variable should be omitted from the run command line; it will in any case be ignored, and the pre-existing database will not be changed in any way.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"creating-database-dumps\"}},[e._v(\"Creating database dumps\")]),e._v(\" \"),a(\"p\",[e._v(\"Most of the normal tools will work, although their usage might be a little convoluted in some cases to ensure they have access to the \"),a(\"code\",[e._v(\"mysqld\")]),e._v(\" server. A simple way to ensure this is to use \"),a(\"code\",[e._v(\"docker exec\")]),e._v(\" and run the tool from the same container, similar to the following:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"$ docker exec some-mariadb sh -c 'exec mysqldump --all-databases -uroot -p\\\"$MYSQL_ROOT_PASSWORD\\\"' > /some/path/on/your/host/all-databases.sql\\n\")])])]),a(\"h2\",{attrs:{id:\"restoring-data-from-dump-files\"}},[e._v(\"Restoring data from dump files\")]),e._v(\" \"),a(\"p\",[e._v(\"For restoring data. You can use \"),a(\"code\",[e._v(\"docker exec\")]),e._v(\" command with \"),a(\"code\",[e._v(\"-i\")]),e._v(\" flag, similar to the following:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"$ docker exec -i some-mariadb sh -c 'exec mysql -uroot -p\\\"$MYSQL_ROOT_PASSWORD\\\"' < /some/path/on/your/host/all-databases.sql\\n\")])])]),a(\"h1\",{attrs:{id:\"license\"}},[e._v(\"License\")]),e._v(\" \"),a(\"p\",[e._v(\"View \"),a(\"a\",{attrs:{href:\"https://mariadb.com/kb/en/library/licensing-faq/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"license information\"),a(\"OutboundLink\")],1),e._v(\" for the software contained in this image.\")]),e._v(\" \"),a(\"p\",[e._v(\"As with all Docker images, these likely also contain other software which may be under other licenses (such as Bash, etc from the base distribution, along with any direct or indirect dependencies of the primary software being contained).\")]),e._v(\" \"),a(\"p\",[e._v(\"Some additional license information which was able to be auto-detected might be found in \"),a(\"a\",{attrs:{href:\"https://github.com/docker-library/repo-info/tree/master/repos/mariadb\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"the \"),a(\"code\",[e._v(\"repo-info\")]),e._v(\" repository's \"),a(\"code\",[e._v(\"mariadb/\")]),e._v(\" directory\"),a(\"OutboundLink\")],1),e._v(\".\")]),e._v(\" \"),a(\"p\",[e._v(\"As for any pre-built image usage, it is the image user's responsibility to ensure that any use of this image complies with any relevant licenses for all software contained within.\")])])}),[],!1,null,null,null);t.default=o.exports}}]);","extractedComments":[]}