(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{358:function(s,a,t){"use strict";t.r(a);var e=t(20),v=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"redis-服务管理"}},[s._v("Redis 服务管理")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提醒")]),s._v(" "),a("p",[s._v("所有数据库的使用都推荐站库分离，来降低内存占用和提高负载能力")])]),s._v(" "),a("h2",{attrs:{id:"云数据库-redis"}},[s._v("云数据库 Redis")]),s._v(" "),a("p",[s._v("同 MySQL 一样，更推荐使用云数据库来进行使用，因为其继承了大厂工程师多年的使用和运维经验，且操作直观。")]),s._v(" "),a("h2",{attrs:{id:"redis面板"}},[s._v("Redis面板")]),s._v(" "),a("p",[s._v("APPNodo 同样提供 Redis 面板图形化控制台，帮助新手快速上手。")]),s._v(" "),a("p",[s._v("一、在 "),a("strong",[s._v("软件管家")]),s._v(" —— "),a("strong",[s._v("运行环境")]),s._v(" 处找到 "),a("strong",[s._v("Redis服务器")]),s._v(" 选择安装面板和环境即可。具体 Redis 版本看自用程序可以兼容的版本即可。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pics.mf8.biz/picgo20190225162630.png",alt:""}})]),s._v(" "),a("p",[s._v("二、进入 Redis 控制台，记得"),a("code",[s._v("启动")]),s._v("并勾选 "),a("code",[s._v("自启")]),s._v("和 "),a("code",[s._v("守护")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pics.mf8.biz/picgo20190225163033.png",alt:""}})]),s._v(" "),a("p",[s._v("三、参数配置，建议进入 "),a("strong",[s._v("源文模式")]),s._v(" 进行编辑")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pics.mf8.biz/picgo20190225175113.png",alt:""}})]),s._v(" "),a("p",[s._v("四、限制最大内存，找到 "),a("code",[s._v("# maxmemory <bytes>")]),s._v(" 在下面一行写入：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("maxmemory "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("268435456")]),s._v("\n")])])]),a("p",[s._v("即最大使用 256M 内存，如果服务器配置够大要自定义内存我们也可以自定义，如果是一个服务器包含所有组件，那就设置为服务器内存的四分之一会比较好。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-b")]),s._v(" 查看服务器内存，以 byte 为单位\n")])])]),a("p",[a("img",{attrs:{src:"https://pics.mf8.biz/picgo20190225175446.png",alt:""}})]),s._v(" "),a("p",[s._v("然后复制 total 处 Mem 的数值除一下就可以了。")]),s._v(" "),a("p",[s._v("五、进程保护，找到"),a("code",[s._v("daemonize no")]),s._v(" 改成 "),a("code",[s._v("daemonize yes")])]),s._v(" "),a("p",[s._v("六、保存后点击上方的按钮重启 Redis")]),s._v(" "),a("h2",{attrs:{id:"二进制包安装"}},[s._v("二进制包安装")]),s._v(" "),a("p",[s._v("通过 EPEL 源进行 Redis 的安装")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" epel-release "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" redis "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\n")])])]),a("p",[s._v("然后我们修改 "),a("code",[s._v("/etc/redis.conf")]),s._v(" 文件即可")]),s._v(" "),a("p",[s._v("修改内容同 Redis面板 中要修改的代码一致。")]),s._v(" "),a("h2",{attrs:{id:"站库分离"}},[s._v("站库分离")]),s._v(" "),a("p",[s._v("站库分离即网站服务器和数据库服务器分离，这样的好处是不同软件之间相互隔离，安全性的提升还有就是可以节省成本，例如 Redis 就可以只买大内存实例而无需过分重视磁盘和CPU性能。")]),s._v(" "),a("p",[s._v("这样也是和 LiteSpeed 免费版授权只允许最大 2G 内存的情况，进行分离可以有效提升性能。")]),s._v(" "),a("p",[s._v("一、修改 参数配置，进入 "),a("strong",[s._v("源文模式")]),s._v(" 进行编辑，或者修改 "),a("code",[s._v("/etc/redis.conf")]),s._v(" 文件。")]),s._v(" "),a("p",[s._v("将")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bind 127.0.0.1")]),s._v("\n")])])]),a("p",[s._v("修改为")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("内网ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\n")])])]),a("p",[s._v("例如：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".81.167 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\n")])])]),a("p",[s._v("然后重启 Redis 服务")]),s._v(" "),a("p",[s._v("二、开放服务器防火墙，防火墙设置详细教程请看："),a("strong",[a("RouterLink",{attrs:{to:"/lsws/others/firewall.html"}},[s._v("防火墙设置")])],1)]),s._v(" "),a("p",[s._v("用面板的在防火墙处开放 "),a("code",[s._v("6379")]),s._v(" 端口")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pics.mf8.biz/picgo20190228142653.png",alt:""}})]),s._v(" "),a("p",[s._v("用 Firewall 的用下面语句开放端口并重载防火墙。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("firewall-cmd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--zone")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("/tcp "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--permanent")]),s._v("\nfirewall-cmd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--reload")]),s._v("\n")])])]),a("p",[s._v("三、云服务器的同学们记得在安全组上开放对应的 "),a("code",[s._v("6379")]),s._v(" 端口")])])}),[],!1,null,null,null);a.default=v.exports}}]);