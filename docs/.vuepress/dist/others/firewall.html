<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>防火墙设置 | LLStack</title>
    <meta name="description" content="LLStack - 基于(Open)LiteSpeed的一站式高性能PHP网站解决方案/一键包，这是一款提供便捷、纯粹的 (Open)LiteSpeed+PHP+MySQL 运行环境的一键包。">
    <meta name="generator" content="VuePress 1.3.0">
    
    <meta property="og:site_name" content="LLStack"><meta property="og:title" content="防火墙设置"><meta property="og:type" content="website"><meta property="og:url" content="/others/firewall.html"><meta name="twitter:title" content="防火墙设置"><meta name="twitter:url" content="/others/firewall.html"><meta name="twitter:card" content="summary_large_image">
    <link rel="preload" href="/assets/css/0.styles.2cd38edf.css" as="style"><link rel="preload" href="/assets/js/app.a453011c.js" as="script"><link rel="preload" href="/assets/js/2.25f4805c.js" as="script"><link rel="preload" href="/assets/js/33.fa23f891.js" as="script"><link rel="preload" href="/assets/js/3.a091ac96.js" as="script"><link rel="prefetch" href="/assets/js/10.2d50d411.js"><link rel="prefetch" href="/assets/js/11.6d388fbf.js"><link rel="prefetch" href="/assets/js/12.fac933d0.js"><link rel="prefetch" href="/assets/js/13.d814101e.js"><link rel="prefetch" href="/assets/js/14.7b33a2eb.js"><link rel="prefetch" href="/assets/js/15.14cea6b4.js"><link rel="prefetch" href="/assets/js/16.340aad1b.js"><link rel="prefetch" href="/assets/js/17.a20723ba.js"><link rel="prefetch" href="/assets/js/18.f57d8763.js"><link rel="prefetch" href="/assets/js/19.c67a6399.js"><link rel="prefetch" href="/assets/js/20.53ed802f.js"><link rel="prefetch" href="/assets/js/21.ab1b9cff.js"><link rel="prefetch" href="/assets/js/22.73d55546.js"><link rel="prefetch" href="/assets/js/23.cb687969.js"><link rel="prefetch" href="/assets/js/24.cf1bbc9f.js"><link rel="prefetch" href="/assets/js/25.bce64921.js"><link rel="prefetch" href="/assets/js/26.244f6f63.js"><link rel="prefetch" href="/assets/js/27.8da6a08a.js"><link rel="prefetch" href="/assets/js/28.7e08cc2c.js"><link rel="prefetch" href="/assets/js/29.91b38d56.js"><link rel="prefetch" href="/assets/js/30.85a145be.js"><link rel="prefetch" href="/assets/js/31.0bc49440.js"><link rel="prefetch" href="/assets/js/32.4561f71a.js"><link rel="prefetch" href="/assets/js/34.caa69819.js"><link rel="prefetch" href="/assets/js/35.b3fd7090.js"><link rel="prefetch" href="/assets/js/36.9804a01f.js"><link rel="prefetch" href="/assets/js/37.376cd81a.js"><link rel="prefetch" href="/assets/js/4.c68e79bd.js"><link rel="prefetch" href="/assets/js/5.351f1ee0.js"><link rel="prefetch" href="/assets/js/6.8d32e322.js"><link rel="prefetch" href="/assets/js/7.7c92cc73.js"><link rel="prefetch" href="/assets/js/8.59769d2e.js"><link rel="prefetch" href="/assets/js/9.2d97bbea.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2cd38edf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">LLStack</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="安装" class="dropdown-title"><span class="title">安装</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ols/" class="nav-link">
  OLStack
</a></li><li class="dropdown-item"><!----> <a href="/lsws/install/" class="nav-link">
  LLStack
</a></li></ul></div></div><div class="nav-item"><a href="/vhost/" class="nav-link">
  虚拟主机管理
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="OLS组件管理" class="dropdown-title"><span class="title">OLS组件管理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ols/openlitespeed/" class="nav-link">
  OpenLiteSpeed
</a></li><li class="dropdown-item"><!----> <a href="/ols/php/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/ols/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/ols/redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="LSWS组件管理" class="dropdown-title"><span class="title">LSWS组件管理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lsws/LiteSpeed/" class="nav-link">
  LiteSpeed
</a></li><li class="dropdown-item"><!----> <a href="/lsws/php/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/lsws/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/lsws/redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他设置" class="dropdown-title"><span class="title">其他设置</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/firewall.html" class="nav-link router-link-exact-active router-link-active">
  防火墙
</a></li><li class="dropdown-item"><!----> <a href="/others/Security-group.html" class="nav-link">
  安全组
</a></li><li class="dropdown-item"><!----> <a href="/others/fdisk.html" class="nav-link">
  磁盘挂载
</a></li></ul></div></div><div class="nav-item"><a href="/old/v1/" class="nav-link">
  老版LSWS说明书
</a></div> <a href="https://github.com/LLStack" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="安装" class="dropdown-title"><span class="title">安装</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ols/" class="nav-link">
  OLStack
</a></li><li class="dropdown-item"><!----> <a href="/lsws/install/" class="nav-link">
  LLStack
</a></li></ul></div></div><div class="nav-item"><a href="/vhost/" class="nav-link">
  虚拟主机管理
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="OLS组件管理" class="dropdown-title"><span class="title">OLS组件管理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ols/openlitespeed/" class="nav-link">
  OpenLiteSpeed
</a></li><li class="dropdown-item"><!----> <a href="/ols/php/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/ols/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/ols/redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="LSWS组件管理" class="dropdown-title"><span class="title">LSWS组件管理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lsws/LiteSpeed/" class="nav-link">
  LiteSpeed
</a></li><li class="dropdown-item"><!----> <a href="/lsws/php/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/lsws/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/lsws/redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他设置" class="dropdown-title"><span class="title">其他设置</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/firewall.html" class="nav-link router-link-exact-active router-link-active">
  防火墙
</a></li><li class="dropdown-item"><!----> <a href="/others/Security-group.html" class="nav-link">
  安全组
</a></li><li class="dropdown-item"><!----> <a href="/others/fdisk.html" class="nav-link">
  磁盘挂载
</a></li></ul></div></div><div class="nav-item"><a href="/old/v1/" class="nav-link">
  老版LSWS说明书
</a></div> <a href="https://github.com/LLStack" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>防火墙设置</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/others/firewall.html#ufw" class="sidebar-link">UFW</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/others/firewall.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/others/firewall.html#设置默认规则" class="sidebar-link">设置默认规则</a></li><li class="sidebar-sub-header"><a href="/others/firewall.html#开启端口" class="sidebar-link">开启端口</a></li><li class="sidebar-sub-header"><a href="/others/firewall.html#关闭端口" class="sidebar-link">关闭端口</a></li><li class="sidebar-sub-header"><a href="/others/firewall.html#批量添加区间端口" class="sidebar-link">批量添加区间端口</a></li><li class="sidebar-sub-header"><a href="/others/firewall.html#启动防火墙" class="sidebar-link">启动防火墙</a></li><li class="sidebar-sub-header"><a href="/others/firewall.html#关闭防火墙" class="sidebar-link">关闭防火墙</a></li></ul></li><li><a href="/others/firewall.html#firewall" class="sidebar-link">Firewall</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/others/firewall.html#开启端口-2" class="sidebar-link">开启端口</a></li><li class="sidebar-sub-header"><a href="/others/firewall.html#关闭端口-2" class="sidebar-link">关闭端口</a></li><li class="sidebar-sub-header"><a href="/others/firewall.html#批量添加区间端口-2" class="sidebar-link">批量添加区间端口</a></li><li class="sidebar-sub-header"><a href="/others/firewall.html#重启防火墙" class="sidebar-link">重启防火墙</a></li><li class="sidebar-sub-header"><a href="/others/firewall.html#禁用防火墙" class="sidebar-link">禁用防火墙</a></li></ul></li><li><a href="/others/firewall.html#需要的端口" class="sidebar-link">需要的端口</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="防火墙设置">防火墙设置</h1> <p>服务器的防火墙设置非常软件，有些时候服务器和端口的无法启用很可能是防火墙没有及时设置完成的缘故。</p> <p>目前 LLStack 基于 CentOS 7，OLStack 则可以在任何可以运行 Docker 的宿主机系统上运行。</p> <p>这里介绍常见的两个简单 Linux 防火墙设置软件的教程。分别是 Firewall 和 UFW，他们都比 iptables 更加简单易学。</p> <p>Debian、Ubuntu、Deepin、ArchLinux 等推荐使用 UFW。</p> <p>RHEL、CentOS、Oracle Linux、Fedora、AliyunLinux 推荐使用 Firewall。</p> <h2 id="ufw">UFW</h2> <p>UFW，即简单防火墙uncomplicated firewall，是一个 Arch Linux、Debian 或 Ubuntu 中管理防火墙规则的前端。 UFW 通过命令行使用（尽管它有可用的 GUI），它的目的是使防火墙配置简单（即不复杂uncomplicated）。</p> <h3 id="安装">安装</h3> <p><strong>ArchLinux：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> pacman -S ufw
</code></pre></div><p><strong>Debian/Ubuntu：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">apt-get</span> update 
<span class="token function">apt-get</span> <span class="token function">install</span> ufw -y
</code></pre></div><h3 id="设置默认规则">设置默认规则</h3> <p>大多数系统只需要打开少量的端口接受传入连接，并且关闭所有剩余的端口。 从一个简单的规则基础开始，<code>ufw default</code>命令可以用于设置对传入和传出连接的默认响应动作。 要拒绝所有传入并允许所有传出连接，那么运行：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ufw default allow outgoing
ufw default deny incoming
</code></pre></div><h3 id="开启端口">开启端口</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>ufw allow <span class="token number">80</span>
ufw allow <span class="token number">443</span>
</code></pre></div><p>这里的 <code>80</code>,<code>443</code> 即要开启的端口，我们可以自定义。</p> <p>也可以是具体的TCP或者UDP协议：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ufw allow <span class="token number">80</span>/tcp
ufw allow <span class="token number">443</span>/tcp
ufw allow <span class="token number">443</span>/udp
</code></pre></div><h3 id="关闭端口">关闭端口</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>ufw deny <span class="token number">80</span>
ufw deny <span class="token number">443</span>
</code></pre></div><h3 id="批量添加区间端口">批量添加区间端口</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>ufw allow <span class="token number">4400</span>:4600/udp
ufw allow <span class="token number">4400</span>:4600/tcp
</code></pre></div><h3 id="启动防火墙">启动防火墙</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>ufw <span class="token builtin class-name">enable</span>
</code></pre></div><h3 id="关闭防火墙">关闭防火墙</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>ufw disable
</code></pre></div><h2 id="firewall">Firewall</h2> <p>Firewall 是 CentOS 7 开始自带的防火墙服务以取代较为复杂的 iptables。 LLStack 无面板版使用的是 Firewall。</p> <h3 id="开启端口-2">开启端口</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">80</span>/tcp --permanent
firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">443</span>/tcp --permanent
</code></pre></div><p>这里的 <code>80</code>,<code>443</code> 即要开启的端口，我们可以自定义。</p> <h3 id="关闭端口-2">关闭端口</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>firewall-cmd --zone<span class="token operator">=</span>public --remove-port<span class="token operator">=</span><span class="token number">80</span>/tcp --permanent
firewall-cmd --zone<span class="token operator">=</span>public --remove-port<span class="token operator">=</span><span class="token number">443</span>/tcp --permanent
</code></pre></div><h3 id="批量添加区间端口-2">批量添加区间端口</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">4400</span>-4600/udp --permanent
firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">4400</span>-4600/tcp --permanent
</code></pre></div><h3 id="重启防火墙">重启防火墙</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>firewall-cmd --reload // 重载

<span class="token function">service</span> firewalld restart // 重启
</code></pre></div><h3 id="禁用防火墙">禁用防火墙</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl stop firewalld // 纯禁用
systemctl disable firewalld // 禁止开机启动
</code></pre></div><h2 id="需要的端口">需要的端口</h2> <p><strong>LLStack/OLStack 需要开放的端口：</strong></p> <table><thead><tr><th style="text-align:center;">服务器名称</th> <th style="text-align:center;">开放端口</th> <th style="text-align:center;">推荐开放ip</th> <th style="text-align:center;">备注</th></tr></thead> <tbody><tr><td style="text-align:center;">HTTP</td> <td style="text-align:center;">80</td> <td style="text-align:center;">0.0.0.0/0  ::/0</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">HTTPS</td> <td style="text-align:center;">443</td> <td style="text-align:center;">0.0.0.0/0  ::/0</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">LiteSpeed Web Admin</td> <td style="text-align:center;">7080</td> <td style="text-align:center;">自己的ip</td> <td style="text-align:center;">建议将默认的7080更换为自定义端口</td></tr> <tr><td style="text-align:center;">SSH</td> <td style="text-align:center;">22</td> <td style="text-align:center;">自己的ip</td> <td style="text-align:center;">建议将默认的22更换为自定义端口</td></tr> <tr><td style="text-align:center;">MySQL</td> <td style="text-align:center;">3306</td> <td style="text-align:center;">服务器内网IP</td> <td style="text-align:center;">站库分离时使用，若不分离无需开启</td></tr> <tr><td style="text-align:center;">Redis</td> <td style="text-align:center;">6379</td> <td style="text-align:center;">服务器内网IP</td> <td style="text-align:center;">站库分离时使用，若不分离无需开启</td></tr></tbody></table> <p>安全起见建议将 LiteSpeed Web Admin 和 SSH 改为非标准端口。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com//LLStack/Docs/edit/master/others/firewall.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.a453011c.js" defer></script><script src="/assets/js/2.25f4805c.js" defer></script><script src="/assets/js/33.fa23f891.js" defer></script><script src="/assets/js/3.a091ac96.js" defer></script>
  </body>
</html>
